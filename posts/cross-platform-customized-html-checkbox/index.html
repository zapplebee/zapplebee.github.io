<!doctype html><html lang="en"><head><meta charset="utf-8"><base href="https://zapplebee.github.io"><link rel="apple-touch-icon" sizes="180x180" href="/icons/favicon-180.png"><link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32.png"><link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16.png"><link rel="icon" type="image/png" href="/icons/favicon-96.png" sizes="96x96"><link rel="apple-touch-icon" sizes="57x57" href="/icons/favicon-57.png"><link rel="apple-touch-icon" sizes="114x114" href="/icons/favicon-114.png"><link rel="apple-touch-icon" sizes="72x72" href="/icons/favicon-72.png"><link rel="apple-touch-icon" sizes="144x144" href="/icons/favicon-144.png"><link rel="apple-touch-icon" sizes="60x60" href="/icons/favicon-60.png"><link rel="apple-touch-icon" sizes="120x120" href="/icons/favicon-120.png"><link rel="apple-touch-icon" sizes="76x76" href="/icons/favicon-76.png"><link rel="apple-touch-icon" sizes="152x152" href="/icons/favicon-152.png"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="twitter:site" content="@zapplebee"/><meta name="twitter:card" content="summary"/><meta name="twitter:description" content="How to create an actually cross-platform HTML checkbox easily that remains ARIA compliant"/><meta name="description" content="How to create an actually cross-platform HTML checkbox easily that remains ARIA compliant"><meta name="twitter:image" content="https://zapplebee.github.io/posts/cross-platform-customized-html-checkbox/twitter.png"><meta name="twitter:image:alt" content="Image of text: How to create an actually cross-platform HTML checkbox easily that remains ARIA compliant"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://zapplebee.github.io/posts/cross-platform-customized-html-checkbox/og.png"/><link rel="canonical" href="https://zapplebee.github.io/posts/cross-platform-customized-html-checkbox/"/><meta property="og:url" content="https://zapplebee.github.io/posts/cross-platform-customized-html-checkbox/"/><meta property="og:description" content="How to create an actually cross-platform HTML checkbox easily that remains ARIA compliant"/><meta property="og:type" content="article"/><meta property="og:title" content="Create an actually custom checkbox"/><meta property="article:published_time" content="2021-12-06"/><title>Zachary Skalko Blog | Create an actually custom checkbox</title><style>.a{border:0;border-radius:4px;left:-45vw;overflow:hidden;position:absolute;width:90vw}.a,.b{height:80vh}.b{margin:auto;position:relative;width:0}.c{color:rgba(68,43,56,var(--tw-text-opacity));font-size:3rem;line-height:1}.c,.e{--tw-text-opacity:1;font-weight:500}.e{color:rgba(51,40,38,var(--tw-text-opacity));font-size:1.875rem;line-height:2.25rem}.f{--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity))}.f,.g{font-weight:500}.g{display:grid;gap:.5rem;grid-template-columns:repeat(1,minmax(0,1fr));list-style-type:disc;margin:0 0 0 2rem;max-width:65ch}@media (min-width:768px){.g{max-width:120ch}}.h{font-weight:500}.i{color:rgba(18,91,224,var(--tw-text-opacity))}.i,.i:visited{--tw-text-opacity:1}.i:visited{color:rgba(68,43,56,var(--tw-text-opacity))}.i:focus,.i:hover{--tw-text-opacity:1;color:rgba(51,40,38,var(--tw-text-opacity))}*,:after,:before{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-ring-inset:var(--tw-empty,);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-blur:var(--tw-empty,);--tw-brightness:var(--tw-empty,);--tw-contrast:var(--tw-empty,);--tw-grayscale:var(--tw-empty,);--tw-hue-rotate:var(--tw-empty,);--tw-invert:var(--tw-empty,);--tw-saturate:var(--tw-empty,);--tw-sepia:var(--tw-empty,);--tw-drop-shadow:var(--tw-empty,);--tw-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);--tw-backdrop-blur:var(--tw-empty,);--tw-backdrop-brightness:var(--tw-empty,);--tw-backdrop-contrast:var(--tw-empty,);--tw-backdrop-grayscale:var(--tw-empty,);--tw-backdrop-hue-rotate:var(--tw-empty,);--tw-backdrop-invert:var(--tw-empty,);--tw-backdrop-opacity:var(--tw-empty,);--tw-backdrop-saturate:var(--tw-empty,);--tw-backdrop-sepia:var(--tw-empty,);--tw-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);border:0 solid;box-sizing:border-box}html{-webkit-text-size-adjust:100%;font-family:Helvetica Neue,sans-serif;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{font-family:inherit;line-height:inherit;margin:0}code,pre{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}input{color:inherit;font-family:inherit;font-size:100%;line-height:inherit;padding:0}figure,h1,h2,input,p,pre,ul{margin:0}ul{list-style:none;padding:0}input::-webkit-input-placeholder{color:#a1a1aa}input::-moz-placeholder{color:#a1a1aa}input:-ms-input-placeholder{color:#a1a1aa}input::-ms-input-placeholder{color:#a1a1aa}input::placeholder{color:#a1a1aa}h1,h2{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}embed,iframe,svg{display:block;vertical-align:middle}body{background-color:#d7d8db!important}#bg-container{height:100vh;left:0;position:fixed;top:0;width:100vw;z-index:-1}#content{z-index:1}.j{--tw-bg-opacity:1;--tw-text-opacity:1;background-color:rgba(51,40,38,var(--tw-bg-opacity));color:rgba(187,187,187,var(--tw-text-opacity));display:grid;font-size:1.875rem;gap:.5rem;grid-template-columns:repeat(1,minmax(0,1fr));line-height:2.25rem;padding:1.5rem}@media (min-width:768px){.j{font-size:3.75rem;grid-template-columns:repeat(2,minmax(0,1fr));line-height:1}}.k:focus,.k:hover{--tw-text-opacity:1;color:rgba(245,183,1,var(--tw-text-opacity))}.l{-ms-flex-item-align:center;align-self:center;font-size:1.125rem;line-height:1.75rem;text-align:left}@media (min-width:768px){.l{font-size:1.875rem;line-height:2.25rem;text-align:right}}.m:focus,.m:hover,.n:focus,.n:hover,.o:focus,.o:hover{--tw-text-opacity:1;color:rgba(245,183,1,var(--tw-text-opacity))}.p{display:grid;gap:1.5rem;grid-template-columns:repeat(1,minmax(0,1fr));margin:auto auto 8rem;max-width:65ch;padding:1rem}@media (min-width:768px){.p{max-width:120ch}}.q{--tw-bg-opacity:1;--tw-text-opacity:1;-ms-flex-pack:end;background-color:rgba(187,187,187,var(--tw-bg-opacity));color:rgba(51,40,38,var(--tw-text-opacity));display:-ms-flexbox;display:flex;font-size:.875rem;gap:.5rem;justify-content:flex-end;line-height:1.25rem;padding:.5rem}</style><script defer="defer" src="/clientScripts.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-3KX9BK97EH"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-3KX9BK97EH")</script></head><body><div id="content"><nav class="page___StyledNav-sc-63xr6q-0 j"><div><a href="/" class="page___StyledA-sc-63xr6q-1 k">zapplebee.github.io</a></div><div class="page___StyledDiv-sc-63xr6q-2 l"><a href="https://twitter.com/zapplebee" target="_blank" rel="noreferrer" class="page___StyledA2-sc-63xr6q-3 m">twitter</a> | <a href="https://github.com/zapplebee" target="_blank" rel="noreferrer" class="page___StyledA3-sc-63xr6q-4 n">github</a> | <a href="https://www.linkedin.com/in/zachary-skalko-b33b3536/" rel="noreferrer" target="_blank" class="page___StyledA4-sc-63xr6q-5 o">linkedin</a></div></nav><div><div class="post11ty___StyledDiv-sc-7t171c-1 q"><div>Published: <time dateTime="2021-12-06T00:49:46.000-06:00">December 6, 2021</time></div></div><article class="post11ty__Article-sc-7t171c-0 p"><h1 class="sc-bdfBQB c">How to create an actually cross-platform HTML checkbox easily that remains ARIA compliant</h1><p class="sc-hKgJUU f">You have Googled to the ends of the Earth to figure out how to actually customize a checkbox.</p><h2 class="sc-gsTEea e">Is this guide for me?</h2><ul class="sc-jSgvzq g"><li class="sc-gKseQn h">Have you ever written an SVG is <em>AND/OR</em> do you have the assets you need for your checkboxes in hand?</li><li class="sc-gKseQn h">Are you absolutely sure you don&#x27;t want to use the native checkbox?</li><li class="sc-gKseQn h">Like, really sure?</li><li class="sc-gKseQn h">Because there&#x27;s a lot good about using the platform.</li><li class="sc-gKseQn h">Would you be happier using an off-the-shelf checkbox from a component library?</li><li class="sc-gKseQn h">Are you willing to write a version of your checkbox for every state (focused, hovered, etc)?</li><li class="sc-gKseQn h">Are you already using React? Because we&#x27;re going to use it here. Though you absolutetly do not need to.</li></ul><h2 class="sc-gsTEea e">Let&#x27;s see it working first.</h2><div class="motifs__CSSpacer-sc-1428xoo-1 b"><iframe src="https://codesandbox.io/embed/dry-sun-vzvnc?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="dry-sun-vzvnc" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" class="motifs__CS-sc-1428xoo-0 a"></iframe></div><h2 class="sc-gsTEea e">CSS Variables</h2><p class="sc-hKgJUU f">Let&#x27;s take a look at <code>styles.css</code>. If you&#x27;re unfamiliar with CSS variables this might feel a little strange.</p><pre><div style="display:block;overflow-x:auto;padding:.5em;background:#2e3440;color:#d8dee9"><code class="language-css" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#81a1c1">input</span><span style="color:#8fbcbb">[type=</span><span style="color:#a3be8c">&quot;checkbox&quot;</span><span style="color:#8fbcbb">]</span><span> {
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span><span>  </span><span style="color:#d8dee9">width</span><span>: </span><span style="color:#b48ead">1rem</span><span>;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span><span>  </span><span style="color:#d8dee9">height</span><span>: </span><span style="color:#b48ead">1rem</span><span>;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">4</span><span>  appearance: </span><span style="color:#8fbcbb">var</span><span>(--appearance);
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">5</span><span>  -webkit-appearance: </span><span style="color:#8fbcbb">var</span><span>(--appearance);
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">6</span>}
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">7</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">8</span><span></span><span style="color:#81a1c1">input</span><span style="color:#8fbcbb">[type=</span><span style="color:#a3be8c">&quot;checkbox&quot;</span><span style="color:#8fbcbb">]</span><span style="color:#88c0d0">::before</span><span> {
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">9</span><span>  </span><span style="color:#d8dee9">width</span><span>: </span><span style="color:#b48ead">100%</span><span>;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">10</span><span>  </span><span style="color:#d8dee9">height</span><span>: </span><span style="color:#b48ead">100%</span><span>;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">11</span><span>  </span><span style="color:#d8dee9">content</span><span>: </span><span style="color:#a3be8c">&quot;&quot;</span><span>;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">12</span><span>  </span><span style="color:#d8dee9">display</span><span>: block;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">13</span><span>  </span><span style="color:#d8dee9">background-size</span><span>: contain;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">14</span><span>  </span><span style="color:#d8dee9">background-image</span><span>: </span><span style="color:#8fbcbb">var</span><span>(--svgStringInitial);
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">15</span>}
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">16</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">17</span><span></span><span style="color:#81a1c1">input</span><span style="color:#8fbcbb">[type=</span><span style="color:#a3be8c">&quot;checkbox&quot;</span><span style="color:#8fbcbb">]</span><span style="color:#88c0d0">:checked</span><span style="color:#88c0d0">::before</span><span> {
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">18</span><span>  </span><span style="color:#d8dee9">background-image</span><span>: </span><span style="color:#8fbcbb">var</span><span>(--svgStringChecked);
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">19</span>}
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">20</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">21</span><span></span><span style="color:#81a1c1">input</span><span style="color:#8fbcbb">[type=</span><span style="color:#a3be8c">&quot;checkbox&quot;</span><span style="color:#8fbcbb">]</span><span style="color:#88c0d0">:disabled</span><span style="color:#88c0d0">::before</span><span> {
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">22</span><span>  </span><span style="color:#d8dee9">background-image</span><span>: </span><span style="color:#8fbcbb">var</span><span>(--svgStringDisabled);
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">23</span>}
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">24</span>
</code></div></pre><p class="sc-hKgJUU f">On line 4 we see</p><pre><div style="display:block;overflow-x:auto;padding:.5em;background:#2e3440;color:#d8dee9"><code class="language-css" style="white-space:pre"><span>appearance: </span><span style="color:#8fbcbb">var</span><span>(--appearance);
</span>
</code></div></pre><p class="sc-hKgJUU f">This <code>var()</code> lets us access a value we&#x27;ve declared elsewhere. In this case we&#x27;ve declared it inline in the JSX.</p><pre><div style="display:block;overflow-x:auto;padding:.5em;background:#2e3440;color:#d8dee9"><code class="language-jsx" style="white-space:pre"><span style="color:#81a1c1">export</span><span> </span><span style="color:#81a1c1">default</span><span> </span><span style="color:#81a1c1">function</span><span style="color:#88c0d0"> </span><span style="color:#8fbcbb">Checkbox</span><span style="color:#88c0d0">(</span><span style="color:#88c0d0">) </span><span>{
</span><span>  </span><span style="color:#81a1c1">const</span><span> cssVariables = {
</span><span>    </span><span style="color:#a3be8c">&quot;--apperance&quot;</span><span>: </span><span style="color:#a3be8c">&quot;none&quot;</span><span>,
</span><span>    </span><span style="color:#a3be8c">&quot;--svgStringInitial&quot;</span><span>: svgString(</span><span style="color:#a3be8c">&quot;black&quot;</span><span>),
</span><span>    </span><span style="color:#a3be8c">&quot;--svgStringChecked&quot;</span><span>: svgString(</span><span style="color:#a3be8c">&quot;green&quot;</span><span>),
</span><span>    </span><span style="color:#a3be8c">&quot;--svgStringDisabled&quot;</span><span>: svgString(</span><span style="color:#a3be8c">&quot;gray&quot;</span><span>),
</span>  };
<span>  </span><span style="color:#81a1c1">return</span><span> </span><span class="xml" style="color:#81a1c1">&lt;</span><span class="xml" style="color:#81a1c1">input</span><span class="xml" style="color:#81a1c1"> </span><span class="xml" style="color:#8fbcbb">style</span><span class="xml" style="color:#81a1c1">=</span><span class="xml" style="color:#a3be8c">{cssVariables}</span><span class="xml" style="color:#81a1c1"> </span><span class="xml" style="color:#8fbcbb">type</span><span class="xml" style="color:#81a1c1">=</span><span class="xml" style="color:#a3be8c">&quot;checkbox&quot;</span><span class="xml" style="color:#81a1c1"> /&gt;</span><span>;
</span>}

</code></div></pre><p class="sc-hKgJUU f">These variables are just the same as any other CSS property.</p><p class="sc-hKgJUU f">You probably notice however though that we&#x27;re setting <code>--appearance</code> here. This is a nice fallback measure in the case that the browser does not support CSS variables <a href="https://caniuse.com/css-variables" class="sc-iBPTik i">(actually rather unlikely—but best to fallback to the system checkbox if so)</a>.</p><h2 class="sc-gsTEea e">Data URLs</h2><p class="sc-hKgJUU f">You&#x27;re probably familiar with a base64 data url. But since our SVGs are made up of UTF-8 characters rather than a buffer, we can skip that extra encoding.</p><p class="sc-hKgJUU f"><em>HOWEVER</em> we do need to encode the string somehow because there&#x27;s a mix of dashes, parens, colons, all over the string.</p><p class="sc-hKgJUU f">Fortunately the browser gives us what we need here, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent" class="sc-iBPTik i"><code>encodeURIComponent()</code></a>. The one gotcha that remains is that both single and double quotes are URI safe characters. They&#x27;re control characters in CSS though so we have to encode them ourselves.</p><pre><div style="display:block;overflow-x:auto;padding:.5em;background:#2e3440;color:#d8dee9"><code class="language-js" style="white-space:pre"><span style="color:#81a1c1">const</span><span> svgToDataUrl = </span><span style="color:#88c0d0">(</span><span style="color:#d8dee9">svg</span><span style="color:#88c0d0">) =&gt;</span><span> {
</span><span>  </span><span style="color:#81a1c1">return</span><span> (
</span><span>    </span><span style="color:#a3be8c">&quot;data:image/svg+xml,&quot;</span><span> +
</span><span>    </span><span style="color:#8fbcbb">encodeURIComponent</span><span>(svg).replace(</span><span style="color:#ebcb8b">/&#x27;/g</span><span>, </span><span style="color:#a3be8c">&quot;%27&quot;</span><span>).replace(</span><span style="color:#ebcb8b">/&quot;/g</span><span>, </span><span style="color:#a3be8c">&quot;%22&quot;</span><span>)
</span>  );
};

</code></div></pre></article></div></div><div id="bg-container"></div></body></html>